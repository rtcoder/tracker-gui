(this["webpackJsonptracker-gui"]=this["webpackJsonptracker-gui"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(21),r=n.n(i),o=(n(29),n(30),n(14)),s=n(3),l=n(2),d=(n(31),n(32),n(0));var u=function(e){var t=e.url,n=e.children,c=e.disabled;return Object(d.jsx)("button",{disabled:c,children:Object(d.jsx)(o.b,{to:t,children:n})})},j=n(24);n(39);var b=function(e){var t=e.address,n=e.addressUpdated,a=Object(c.useState)(""),i=Object(l.a)(a,2),r=i[0],o=i[1],s=Object(c.useState)(""),u=Object(l.a)(s,2),b=u[0],h=u[1],v=Object(c.useState)(""),O=Object(l.a)(v,2),p=O[0],f=O[1],g=Object(c.useState)(""),x=Object(l.a)(g,2),m=x[0],w=x[1],y=Object(c.useState)(""),k=Object(l.a)(y,2),S=k[0],z=k[1],N=Object(c.useState)(""),E=Object(l.a)(N,2),C=E[0],L=E[1],I=Object(c.useState)(""),F=Object(l.a)(I,2),P=F[0],W=F[1],R=Object(c.useState)(!0),A=Object(l.a)(R,2),B=A[0],J=A[1],U=function(e){var t=!e.length;if(t)return o(""),h(""),f(""),w(""),z(""),void L("");var c=e.split("//"),a="",i="";2===c.length?(a=c[0].replace(":",""),i=c[1]):i=c[0];var r=i.split("@"),s="",d="";2===r.length?(s=r[0],d=r[1]):d=r[0];var u=s.split(":"),b=Object(l.a)(u,2),v=b[0],O=void 0===v?"":v,p=b[1],g=void 0===p?"":p,x=d.split("/"),m=Object(j.a)(x),y=m[0],k=m.slice(1),S=y.split(":"),N=Object(l.a)(S,2),E=N[0],C=N[1],I=void 0===C?"":C;o(a),h(O),f(g),w(E),z(I),L(k),n&&n(t?{address:"",protocol:"",login:"",password:"",ip:"",port:"",path:""}:{address:e,protocol:a,login:O,password:g,ip:E,port:I,path:k})};return Object(c.useEffect)((function(){U(t)}),[t]),Object(c.useEffect)((function(){P.startsWith("[")||U(P)}),[P]),Object(c.useEffect)((function(){var e,t=S.length?"".concat(m,":").concat(S):m,c=b.length||p.length?"".concat(b,":").concat(p):"",a=c.length?"".concat(c,"@").concat(t):t,i=r.length?r:"rstp",o=C.length?"".concat(a,"/").concat(C):"".concat(a);e=(o=o.length?"".concat(i,"://").concat(o):"[protok\xf3\u0142]://[login]:[has\u0142o]@[ip]:[port]/[\u015bcie\u017cka]").startsWith("["),W(o),n&&n(e?{address:"",protocol:"",login:"",password:"",ip:"",port:"",path:""}:{address:o,protocol:r,login:b,password:p,ip:m,port:S,path:C}),J(e)}),[r,b,p,m,S,C,B]),Object(d.jsx)("div",{className:"form",children:Object(d.jsxs)("div",{className:"inputs",children:[Object(d.jsx)("input",{type:"text",placeholder:"adres",value:P.startsWith("[")?"":P,onChange:function(e){return W(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"protok\xf3\u0142",value:r,onChange:function(e){return o(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"login",value:b,onChange:function(e){return h(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"has\u0142o",value:p,onChange:function(e){return f(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"ip",value:m,onChange:function(e){return w(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"port",value:S,onChange:function(e){return z(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"\u015bcie\u017cka",value:C,onChange:function(e){return L(e.target.value)}})]})})},h=function(){return localStorage.getItem("tracker-cam-address")||""},v=function(e){localStorage.setItem("tracker-points",JSON.stringify(e))},O=function(){var e=localStorage.getItem("tracker-points");return e?JSON.parse(e):[]};var p=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),o=r[0],s=r[1];return Object(c.useEffect)((function(){a(h())}),[]),Object(c.useEffect)((function(){var e;o&&(e=n,localStorage.setItem("tracker-cam-address",e))}),[n,o]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:"Tracker GUI"}),Object(d.jsx)("p",{children:"Jaki\u015b tam tekst co tam apka mo\u017ce robi\u0107 albo kr\xf3tka instrukcja"})]}),Object(d.jsxs)("div",{className:"content home",children:[Object(d.jsxs)("div",{className:"links",children:[Object(d.jsx)(u,{url:"/polygon",disabled:!o,children:"Zaznaczenie sceny"}),Object(d.jsx)(u,{url:"/video",disabled:!o,children:"Podgl\u0105d \u015bledzenia"})]}),n.length&&o?"":Object(d.jsx)("p",{children:"Aby przej\u015b\u0107 dalej musisz poda\u0107 poprawny adres IP kamery"}),Object(d.jsxs)("div",{className:"address",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("code",{className:o?"":"error",children:n}),Object(d.jsx)(b,{address:n,addressUpdated:function(e){var t=e.address;!function(e){var t=e.protocol,n=e.login,c=e.password,a=e.ip,i=e.port;s(!(!(t.length&&a.length&&(n.length&&c.length||!n.length&&!c.length))||!/^\d+$/.test(i)&&i.length))}({protocol:e.protocol,login:e.login,password:e.password,ip:e.ip,port:e.port}),a(t)}})]}),Object(d.jsxs)("div",{className:"addresses-from-local-network",children:[Object(d.jsx)("span",{children:"lub wybierz z listy"}),Object(d.jsxs)("select",{onChange:function(e){return a(e.target.value)},children:[Object(d.jsx)("option",{value:"",children:"Wybierz"}),Object(d.jsx)("option",{value:"http://facebook.com",children:"http://facebook.com"}),Object(d.jsx)("option",{value:"ftp://admin:pass@123.456.789:1212",children:"ftp://admin:pass@123.456.789:1212"}),Object(d.jsx)("option",{value:"432.64.2:4443",children:"432.64.2:4443"}),Object(d.jsx)("option",{value:"ssh://123.456.789:1212",children:"ssh://123.456.789:1212"})]})]})]})]})]})},f=(n(40),n(19));n(41);var g=function(e){var t=e.selectingActive,n=e.pointsUpdated,a=e.pointsFromLs,i=Object(c.useState)(a),r=Object(l.a)(i,2),o=r[0],s=r[1],u=Object(c.useState)([]),j=Object(l.a)(u,2),b=j[0],v=j[1],O=Object(c.useState)({x:-1,y:-1}),p=Object(l.a)(O,2),g=p[0],x=p[1],m=Object(c.useState)(!1),w=Object(l.a)(m,2),y=w[0],k=w[1],S=Object(c.useRef)(),z=Object(c.useRef)(),N=Object(c.useRef)(),E=Object(c.useState)(""),C=Object(l.a)(E,2),L=C[0],I=C[1],F=function(e){var t=null===e||void 0===e?void 0:e.getContext("2d");t.fillStyle="red",null===t||void 0===t||t.clearRect(0,0,null===e||void 0===e?void 0:e.width,null===e||void 0===e?void 0:e.height),console.log([].concat(Object(f.a)(o),[g])),o.filter((function(t){var n=t.x,c=t.y;return n>0&&c>0&&n<e.width&&c<e.height})).forEach((function(e){e.x>0&&e.y>0&&(null===t||void 0===t||t.beginPath(),null===t||void 0===t||t.arc(e.x,e.y,5,0,2*Math.PI),null===t||void 0===t||t.fill())})),y&&g.x>0&&g.y>0&&(null===t||void 0===t||t.beginPath(),null===t||void 0===t||t.arc(g.x,g.y,5,0,2*Math.PI),null===t||void 0===t||t.fill())},P=function(){var e,t=null===(e=S.current)||void 0===e?void 0:e.getBoundingClientRect(),n=t.width,c=t.height;n&&c&&(N.current.width=n,N.current.height=c,z.current.width=n,z.current.height=c)},W=function(e){var t,n=e.clientX,c=e.clientY,a=null===(t=z.current)||void 0===t?void 0:t.getBoundingClientRect(),i=a.top,r=void 0===i?0:i,o=a.left;return{x:n-(void 0===o?0:o),y:c-r}},R=function(e){k(!0),x(W(e))},A=function(e){x(W(e))},B=function(e){var t;k(!1);var n=W(e),c=n.x,a=n.y,i=null===(t=z.current)||void 0===t?void 0:t.getBoundingClientRect(),r=i.width,o=void 0===r?0:r,l=i.height;c>0&&a>0&&c<o&&a<(void 0===l?0:l)&&s((function(e){return[].concat(Object(f.a)(e),[{x:c,y:a}])}))};return Object(c.useEffect)((function(){if(t){v(o),n(o);var e=z.current;F(e)}else s(b)}),[g,o,b,t]),Object(c.useEffect)((function(){s(a),v(a);var e=z.current;F(e)}),[a]),Object(c.useEffect)((function(){var e,t,n=z.current;return I(h()),window.addEventListener("resize",P),null===n||void 0===n||n.addEventListener("mousedown",R),null===(e=window)||void 0===e||e.addEventListener("mousemove",A),null===(t=window)||void 0===t||t.addEventListener("mouseup",B),P(),v(o),F(n),function(){var e,t;window.removeEventListener("resize",P),null===n||void 0===n||n.removeEventListener("mousedown",R),null===(e=window)||void 0===e||e.removeEventListener("mousemove",A),null===(t=window)||void 0===t||t.removeEventListener("mouseup",B)}}),[]),Object(d.jsx)("div",{className:"canvas",children:Object(d.jsxs)("div",{className:"canvas-container",ref:S,children:[Object(d.jsx)("video",{ref:N,src:L,children:"fallback"}),Object(d.jsx)("canvas",{ref:z})]})})};var x=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(O),r=Object(l.a)(i,2),o=r[0],s=r[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)(u,{url:"/",children:"Wstecz"})}),Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)(g,{selectingActive:n,pointsFromLs:o,pointsUpdated:s}),Object(d.jsxs)("div",{className:"three-buttons",children:[Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("button",{onClick:function(){a(!n)},children:n?"Wy\u0142\u0105cz zaznaczanie":"Aktywuj zaznaczanie"})}),Object(d.jsxs)("div",{className:"column",children:[Object(d.jsx)("button",{onClick:function(){v(o)},children:"Zapisz"}),Object(d.jsx)("button",{onClick:function(){v([]),s([])},children:"Wyczy\u015b\u0107"})]}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("button",{children:"Wy\u015blij dane do API"})})]})]})]})};var m=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){a(h())}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)(u,{url:"/",children:"Wstecz"})}),Object(d.jsx)("div",{className:"content",children:Object(d.jsx)("div",{className:"canvas",children:Object(d.jsxs)("div",{className:"canvas-container",children:[Object(d.jsx)("video",{src:n,children:"fallback"}),Object(d.jsx)("canvas",{})]})})})]})};var w=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(s.a,{path:"/",exact:!0,component:p}),Object(d.jsx)(s.a,{path:"/polygon",component:x}),Object(d.jsx)(s.a,{path:"/video",component:m})]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root")),y()}},[[42,1,2]]]);
//# sourceMappingURL=main.107776aa.chunk.js.map